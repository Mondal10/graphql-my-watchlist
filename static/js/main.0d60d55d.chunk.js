(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{32:function(e,t,n){e.exports=n(45)},37:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(26),l=n.n(i),c=(n(37),n(11)),u=n(12),o=n(14),m=n(13),s=n(15),d=n(5),v=n(46),g=n(17);function p(){var e=Object(g.a)(["\n  query($id:ID){\n    movie(id:$id){\n      id\n      name\n      genre\n      imgUrl\n      duration\n      rating\n      director {\n        id\n        name\n        age\n        movie {\n          name\n          id\n        }\n      }\n    }\n  }\n"]);return p=function(){return e},e}function f(){var e=Object(g.a)(["\n  mutation($name: String!, $genre: String!, $directorId: ID!, $imgUrl: String!, $duration: Int!, $rating: Float!){\n    addMovie(name:$name, genre:$genre, directorId:$directorId, imgUrl:$imgUrl, duration:$duration, rating:$rating){\n      name\n      id\n    }\n  }\n"]);return f=function(){return e},e}function h(){var e=Object(g.a)(["\n  {\n    directors {\n        name\n        id\n    }\n  }\n"]);return h=function(){return e},e}function b(){var e=Object(g.a)(["\n  {\n    movies {\n        name\n        id\n    }\n  }\n"]);return b=function(){return e},e}var E=Object(s.b)(b()),y=Object(s.b)(h()),j=Object(s.b)(f()),O=Object(s.b)(p()),k=function(e){Object(o.a)(n,e);var t=Object(m.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"displayMovieDetails",value:function(){var e=this.props.data.movie;return e?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,e.name),e.imgUrl?r.a.createElement("img",{src:e.imgUrl,alt:"".concat(e.name)}):r.a.createElement("small",null,"No Image Found"),r.a.createElement("p",null,"Genre: ",e.genre),r.a.createElement("p",null,"Duration: ",e.duration," min"),r.a.createElement("p",null,"Rating: ",e.rating),r.a.createElement("p",null,"Director: ",e.director.name),r.a.createElement("p",null,"All movies by director:"),r.a.createElement("ul",{className:"other-movies"},e.director.movie.map((function(e){return r.a.createElement("li",{key:e.id},e.name)})))):r.a.createElement("div",null,r.a.createElement("p",null,"No Movies Found"))}},{key:"render",value:function(){return r.a.createElement("div",{id:"movie-details"},this.displayMovieDetails())}}]),n}(a.Component),I=Object(v.a)(O,{options:function(e){return{variables:{id:e.movieId}}}})(k),D=function(e){Object(o.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={selected:null},a}return Object(u.a)(n,[{key:"displayMovies",value:function(){var e=this,t=this.props.data;return t.loading?r.a.createElement("div",null,"Loading Movie List..."):t.movies.map((function(t){return r.a.createElement("li",{key:t.id,onClick:function(n){e.setState({selected:t.id})}},t.name)}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("ul",{id:"movie-list"},this.displayMovies()),r.a.createElement(I,{movieId:this.state.selected}))}}]),n}(a.Component),$=Object(v.a)(E)(D),C=n(31),M=n.n(C),S=function(e){Object(o.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={name:"",genre:"",directorId:"",imgUrl:"",duration:0,rating:0},a.formRef=r.a.createRef(),a}return Object(u.a)(n,[{key:"displayDirectors",value:function(){var e=this.props.getDirectorsQuery;return e.loading?r.a.createElement("option",{disabled:!0},"Loading Directors..."):e.directors.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))}},{key:"submitForm",value:function(e){e.preventDefault(),this.props.addMovieMutation({variables:{name:this.state.name,genre:this.state.genre,directorId:this.state.directorId,imgUrl:this.state.imgUrl,duration:this.state.duration,rating:this.state.rating},refetchQueries:[{query:E}]}),this.resetForm()}},{key:"resetForm",value:function(){this.formRef.current.reset()}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{id:"add-movie",ref:this.formRef,onSubmit:this.submitForm.bind(this)},r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Movie name:"),r.a.createElement("input",{placeholder:"eg: Batman",type:"text",required:!0,onChange:function(t){return e.setState({name:t.target.value})}})),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Cover Image:"),r.a.createElement("input",{placeholder:"eg: image-url.jpg",type:"url",required:!0,onChange:function(t){return e.setState({imgUrl:t.target.value})}})),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Genre:"),r.a.createElement("input",{placeholder:"eg: Action",type:"text",required:!0,onChange:function(t){return e.setState({genre:t.target.value})}})),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Duration:"),r.a.createElement("input",{placeholder:"eg: 152",type:"number",required:!0,onChange:function(t){return e.setState({duration:parseInt(t.target.value)})}})),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Rating:"),r.a.createElement("input",{placeholder:"eg: 7.8",type:"number",min:"1",max:"10",step:"0.1",required:!0,onChange:function(t){return e.setState({rating:parseFloat(t.target.value)})}})),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Director:"),r.a.createElement("select",{required:!0,onChange:function(t){return e.setState({directorId:t.target.value})}},r.a.createElement("option",{value:""},"Select director"),this.displayDirectors())),r.a.createElement("button",null,"+"))}}]),n}(a.Component),q=M()(Object(v.a)(y,{name:"getDirectorsQuery"}),Object(v.a)(j,{name:"addMovieMutation"}))(S),U=new s.a({uri:"https://graphql-watch-list.herokuapp.com/graphql"}),F=function(e){Object(o.a)(n,e);var t=Object(m.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement(d.b,{client:U},r.a.createElement("div",{id:"main"},r.a.createElement("h1",null,"Amit's Watch List"),r.a.createElement($,null),r.a.createElement(q,null)))}}]),n}(a.Component);l.a.render(r.a.createElement(F,null),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.0d60d55d.chunk.js.map